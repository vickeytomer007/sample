schema: '2.0'
stages:
  prepare:
    cmd: python src/prepare.py data/data.xml
    deps:
    - path: data/data.xml
      md5: fa3ae5621f8621bfb79ff1937fb2b35d
      size: 14405378
    - path: src/prepare.py
      md5: 781ba75e42dd4f116bf69feaf6398589
      size: 1610
    params:
      params.yaml:
        prepare.seed: 20170428
        prepare.split: 0.2
    outs:
    - path: data/prepared
      md5: aa83ef065de4ed799c16682b7484d61a.dir
      size: 8425606
      nfiles: 2
  featurize:
    cmd: python src/featurization.py data/prepared data/features
    deps:
    - path: data/prepared
      md5: aa83ef065de4ed799c16682b7484d61a.dir
      size: 8425606
      nfiles: 2
    - path: src/featurization.py
      md5: 02180903aa05599ceaa6ff6ee2471d00
      size: 2480
    params:
      params.yaml:
        featurize.max_features: 500
        featurize.ngrams: 1
    outs:
    - path: data/features
      md5: cd791a11c3b5df3c56395001e85da78e.dir
      size: 2894366
      nfiles: 2
  train:
    cmd: python src/train.py data/features model.pkl
    deps:
    - path: data/features
      md5: cd791a11c3b5df3c56395001e85da78e.dir
      size: 2894366
      nfiles: 2
    - path: src/train.py
      md5: c88b28269c50ae102f2fee7b6272baa9
      size: 1366
    params:
      params.yaml:
        train.n_estimators: 100
        train.seed: 20170428
    outs:
    - path: model.pkl
      md5: f908cf4287509d815c225967be055698
      size: 2740205
  evaluate:
    cmd: python src/evaluate.py model.pkl data/features/ scores.json prt.json
    deps:
    - path: data/features/test.pkl
      md5: 34850881325510483c348cb422c9f131
      size: 577617
    - path: model.pkl
      md5: f908cf4287509d815c225967be055698
      size: 2740205
    - path: src/evaluate.py
      md5: 631fd3f13434edcf4abd56a5b798e8b2
      size: 1091
    outs:
    - path: prt.json
      md5: 70a0cb20724db29b9c26119d436a1893
      size: 5386
    - path: scores.json
      md5: 4d91e5e1e368db9b47017e7aae21c989
      size: 27
